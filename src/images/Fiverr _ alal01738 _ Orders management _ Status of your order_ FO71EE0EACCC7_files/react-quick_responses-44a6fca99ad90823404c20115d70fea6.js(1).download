!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLEAR_INITIAL_CONTACT="CLEAR_INITIAL_CONTACT",t.ON_DROP="ON_DROP",t.NO_EDIT="NO_EDIT",t.ON_EDIT="ON_EDIT",t.ON_DUPLICATIE="ON_DUPLICATIE",t.ON_DELETE="ON_DELETE",t.ON_CANCEL="ON_CANCEL",t.ON_SAVE="ON_SAVE",t.SHOW_MENU="SHOW_MENU",t.QR_USED="QR_USED",t.CLEAR_USED="CLEAR_USED",t.NEW_ITEM_ID="NEW_ITEM_ID",t.RESPONSES="responses"},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){e.exports=n(4)},function(e,t,n){"use strict";var r=n(5),o=function(e){return e&&e.__esModule?e:{"default":e}}(r),i=document.getElementById("quick-responses");i&&ReactDOM.render(React.createElement(o["default"],{isDelivery:!1}),i);var a=document.getElementById("quick-responses-delivery");a&&ReactDOM.render(React.createElement(o["default"],{isDelivery:!0}),a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(6),c=r(s),l=n(11),f=r(l);n(32);var d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=c["default"].getState(),e}return a(t,e),u(t,[{key:"render",value:function(){var e=this.state.qrlist;return React.createElement(ReactRedux.Provider,{store:c["default"]},React.createElement(f["default"],{qrlist:e,isDelivery:this.props.isDelivery}))}}]),t}(React.Component);t["default"]=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(r),i=n(9),a=function(e){return e&&e.__esModule?e:{"default":e}}(i),u=Immutable.fromJS(initialData.quickResponses),s=o.configureStore(a["default"],{qrlist:u});t["default"]=s},function(e,t,n){"use strict";e.exports=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Redux.compose(Redux.applyMiddleware(ReduxThunk["default"]),"object"===("undefined"==typeof window?"undefined":r(window))&&void 0!==window.devToolsExtension?window.devToolsExtension():function(e){return e})(Redux.createStore),i=function(e,t){return o(e,t)};t.configureStore=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),o=function(e){return e&&e.__esModule?e:{"default":e}}(r);t["default"]=Redux.combineReducers({qrlist:o["default"]})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,r=void 0,o=void 0;switch(t.type){case i.QR_USED:var a=e.get("qrUsed");return a?a+=","+t.id:a=t.id,e=e.update("qrUsed",function(){return a});case i.CLEAR_USED:return e=e.update("qrUsed",function(){return""});case i.CLEAR_INITIAL_CONTACT:return e=e.update("initial_contact",function(){return!1});case i.NEW_ITEM_ID:return n=e.get(i.RESPONSES),r=n.findKey(function(e,n){return e.get("qr_id")===t.id}),n=n.updateIn([r,"qr_id"],function(){return t.newId}),e=e.update("lastUpdated",function(){return t.newId}),e=e.update(i.RESPONSES,function(){return n});case i.ON_DROP:var u=e.get(i.RESPONSES),s=u.filterNot(function(e,n){return n===t.listState.take}),c=u.get(t.listState.take),l=s.splice(t.listState.put,0,c);return e=e["delete"]("lastUpdated"),e=e.updateIn([i.RESPONSES],function(){return l});case i.ON_EDIT:return e=e.update("editMode",function(){return t.id});case i.NO_EDIT:return e=e.update("editMode",function(){return!1});case i.ON_DUPLICATIE:n=e.get(i.RESPONSES);var f=n.get(t.index);return f=f.update("qr_id",function(){return"dup"}),n=n.splice(t.index+1,0,f),e=e.update("lastUpdated",function(){return"dup"}),e=e.update(i.RESPONSES,function(){return n});case i.ON_DELETE:return n=e.get(i.RESPONSES),n=n["delete"](t.index),e=e["delete"]("lastUpdated"),e=e.update(i.RESPONSES,function(){return n});case i.ON_CANCEL:return e=e["delete"]("lastUpdated"),e=e.update("editMode",function(){return!1});case i.ON_SAVE:return n=e.get(i.RESPONSES),o=t.item.get("qr_id"),r=n.findKey(function(e,t){return e.get("qr_id")===o}),n=_.isUndefined(r)?n.push(t.item):n.update(r,function(){return t.item}),e=e.update(i.RESPONSES,function(){return n}),e=e.update("lastUpdated",function(){return t.item.get("qr_id")});default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(o)},function(e,t,n){"use strict";function r(e){return{qrlist:e.qrlist}}function o(e){return Redux.bindActionCreators(a,e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(i),u=n(13),s=function(e){return e&&e.__esModule?e:{"default":e}}(u);t["default"]=ReactRedux.connect(r,o)(s["default"])},function(e,t,n){"use strict";function r(){return{type:E.ON_EDIT,id:"new"}}function o(e){return{type:E.ON_EDIT,id:e}}function i(e){return{type:E.ON_CANCEL,item:e}}function a(e,t){return{type:E.ON_SAVE,item:e,newId:t}}function u(e,t){return{type:E.ON_DELETE,index:e}}function s(e){return{type:E.ON_DROP,listState:e}}function c(){return{type:E.CLEAR_INITIAL_CONTACT}}function l(e){return{type:E.QR_USED,id:e}}function f(){return{type:E.CLEAR_USED}}function d(){return{type:E.NO_EDIT}}function p(e){return function(t,n){var r=e.toJS(),o=void 0,i=void 0,u=void 0,s=void 0;switch(t(d()),r.qr_id){case"new":case"save_as_qr":u=r.qr_id,i=r.qr_id,o="POST",delete r.qr_id;break;default:o="PUT"}return s={qr_data:r,type:O,event:u},r.qr_id&&(s.qr_id=r.qr_id),t(i?a(e,i):a(e,r.qr_id)),fetch("/quick_responses",{method:o,credentials:"same-origin",headers:{"X-CSRF-Token":w,"Content-Type":S},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){e&&e.qr_id&&i&&t(v(i,e.qr_id))})}}function m(e){var t=void 0;return function(n,r){return t=r().qrlist.get("responses").findKey(function(t){return t.get("qr_id")===e}),n(u(t,e)),fetch("/quick_responses",{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-Token":w,"Content-Type":S},body:JSON.stringify({qr_id:e,type:O})})}}function h(e,t){var n=e.map(function(e){return e.get("qr_id")}).toJS(),r=e.getIn([t,"qr_id"]);return function(e,t){return fetch("/quick_responses/rearrange",{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":w,"Content-Type":S},body:JSON.stringify({display_list:n,qr_id:r,type:O})})}}function y(e,t){return{type:E.ON_DUPLICATIE,index:e,id:t}}function v(e,t){return{type:E.NEW_ITEM_ID,id:e,newId:t}}function g(e){var t=void 0,n=void 0;return function(r,o){return n=o().qrlist.get("responses").find(function(n,r){return n.get("qr_id")===e?(t=r,!0):void 0}).toJS(),r(y(t,e)),fetch("/quick_responses/duplicate",{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":w,"Content-Type":S},body:JSON.stringify({qr_id:e,qr_data:{name:n.name,body:n.body},type:O})}).then(function(e){return 200!==e.status?(r(u(t+1,"dup")),{}):e.json()}).then(function(e){e&&e.qr_id&&r(v("dup",e.qr_id))})}}Object.defineProperty(t,"__esModule",{value:!0});var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.onAddNew=r,t.onEdit=o,t.onCancel=i,t.afterSave=a,t.afterDelete=u,t.onDrop=s,t.clearInitialContact=c,t.qrUsed=l,t.clearUsed=f,t.clearEditMode=d,t.onSave=p,t.onDelete=m,t.postQROrder=h,t.pushDuplicatedItem=y,t.newItemId=v,t.onDuplicate=g;var _=n(1),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(_),w=$('meta[name="csrf-token"]').attr("content"),S="application/json; charset=utf-8",O=void 0;O="object"===("undefined"==typeof window?"undefined":b(window))&&"Fiverr"in window?Fiverr._isPage("conversations")?"conversation":"order":"conversations"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(14),c=r(s),l=n(17),f=r(l),d=n(31),p=r(d),m=void 0,h=void 0,y=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isExpanded:!1,saveAsQr:null,showAll:!0,hoveredQR:null},n.toggleCollapse=n.toggleCollapse.bind(n),n.saveAsQr=n.saveAsQr.bind(n),n.canAddNew=n.canAddNew.bind(n),n.seeAllClicked=n.seeAllClicked.bind(n),n.qrMenuTriggered=n.qrMenuTriggered.bind(n),n.hideQRMenu=n.hideQRMenu.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){m="fConvManager"in window,m&&(fConvManager.rjsClearUsed=this.props.clearUsed,fConvManager.rjsSaveAsQr=this.saveAsQr,fConvManager.rjscanAddQR=this.canAddNew),this.shouldShowAll(),h=$(window)}},{key:"saveAsQr",value:function(e){e&&(this.setState({saveAsQr:e}),this.props.onEdit("save_as_qr"))}},{key:"isEditMode",value:function(){return this.props.qrlist.get("editMode")}},{key:"qrMenuTriggered",value:function(e,t,n){var r=this.state.hoveredQR,o=r&&e===this.state.hoveredQR.qrId;this.setState({hoveredQR:{qrId:e,coordinates:t}}),this.box=n,r?o&&this.hideQRMenu({forceClose:!0}):document.addEventListener("click",this.hideQRMenu)}},{key:"hideQRMenu",value:function(e){if(!e.forceClose){var t=e&&e.target&&_.includes(e.target.classList,"qr-menu-trigger");if(!this.state.hoveredQR||t)return}document.removeEventListener("click",this.hideQRMenu),this.setState({hoveredQR:null})}},{key:"toggleCollapse",value:function(e){var t=_.isUndefined(e)?!this.state.isExpanded:e;this.setState({isExpanded:t,showAll:!0}),this.props.clearInitialContact()}},{key:"seeAllClicked",value:function(){return this.props.clearInitialContact(),this.setState({showAll:!0})}},{key:"isInitialContact",value:function(){return this.props.qrlist.get("initial_contact")}},{key:"shouldShowAll",value:function(e){var t=this.isInitialContact(),n=!this.props.qrlist.get("responses").size,r=void 0,o=void 0;return t&&n?(this.props.clearInitialContact(),this.setState({showAll:!1,isExpanded:!1})):t?n?this.setState({showAll:!0}):(r=document.getElementById("quick-responses"),r.children.length?(o=r.getElementsByClassName("qr-list")[0],_.isUndefined(o)||o.offsetHeight>60?this.setState({showAll:!1,isExpanded:!0}):this.setState({showAll:!0})):this.setState({showAll:!0})):this.setState({showAll:!0})}},{key:"canAddNew",value:function(){return this.props.qrlist.get("responses").size<this.props.qrlist.get("max")}},{key:"render",value:function(){var e=this,t=this.state,n=t.isExpanded,r=t.saveAsQr,o=t.showAll,i=t.hoveredQR,a=this.props,u=a.qrlist,s=a.toggleMenu,l=a.qrUsed,d=a.onEdit,m=a.onDuplicate,h=a.onDelete,y=a.onCancel,v=a.onSave,g=a.onAddNew,b=a.onDrop,_=a.postQROrder,E=a.isDelivery,w={toggleMenu:s,onDrop:b,qrUsed:l,onAddNew:g,postQROrder:_,qrMenuTriggered:this.qrMenuTriggered,hideQRMenu:this.hideQRMenu,menuActions:{onEdit:d,onDuplicate:m,onDelete:h},editActions:{onCancel:y,onSave:v,toggleCollapse:this.toggleCollapse}},S=this.isEditMode(),O=u.get("responses"),C=u.get("qrUsed"),T={hint:u.get("hint"),lastUpdated:u.get("lastUpdated")};if(S){var k=void 0;return k="new"===S?Immutable.fromJS({qr_id:S,name:"",body:""}):"save_as_qr"===S?Immutable.fromJS({qr_id:S,name:"",body:r}):O.find(function(e,t){return e.get("qr_id")===S}),React.createElement("div",null,React.createElement("header",{className:"edit-mode"},React.createElement("span",{className:"use-qr"},$.t("shared.quick_responses.use_qr"))),React.createElement(c["default"],{editItem:k,editActions:w.editActions,isDelivery:E}))}var q=n?"":"collapsed",N="list-wrapper";return N+=o?" show-all":"",N+=this.canAddNew()?"":" no-add",Fiverr&&Fiverr.stopMouseWheel($(".list-wrapper")),React.createElement("div",{className:q},React.createElement("header",null,React.createElement("a",{href:"#!",className:"use-qr",onClick:function(){return e.toggleCollapse()}},$.t("shared.quick_responses.use_qr"))),React.createElement("div",{className:N,ref:function(t){return e.listWrapperElement=t}},React.createElement(f["default"],{responsesList:O,qrActions:w,qrKeys:T,isDelivery:E,menuQR:i}),React.createElement("a",{href:"#!",className:"see-all",onClick:function(){return e.seeAllClicked()}},$.t("shared.quick_responses.see_all"))),React.createElement("input",{type:"hidden",name:"message[used_quick_responses]",value:C}),i&&React.createElement(p["default"],{menuActions:w.menuActions,hideQRMenu:w.hideQRMenu,qr:i,box:this.box,listWrapperElement:this.listWrapperElement}))}}]),t}(React.Component);t["default"]=y},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(15),c=function(e){return e&&e.__esModule?e:{"default":e}}(s),l=function(e){return e?fConvManager.selectors.$deliveryPopup:fConvManager.selectors.$writeWrap},f=void 0,d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={contentCharCount:null,nameCharCount:null,bodyClass:"",nameClass:"",errors:{name:[],body:[],canSave:!1},editItem:n.props.editItem},n.onValueChange=n.onValueChange.bind(n),n.handleSave=n.handleSave.bind(n),n.handleCancel=n.handleCancel.bind(n),n.validate=n.validate.bind(n),n}return a(t,e),u(t,[{key:"componentDidMount",value:function(){f="fConvManager"in window,$(".qr-edit-fields textarea").autogrow({flickering:!0}),this.toggleEdit("on"),this.props.editActions.toggleCollapse(!0)}},{key:"onValueChange",value:function(e){var t,n=this,o=this.state.errors,i=e.target,a=i.name,u=i.maxLength,s=_.truncate(e.target.value,{length:u}),c=s.length+"/"+u,l="body",f="contentCharCount";"qr-name"===a&&(l="name",f="nameCharCount"),this.setState((t={},r(t,f,c),r(t,"editItem",this.state.editItem.update(l,function(){return s})),r(t,l+"Class",""),t)),o[l]=[],this.setState(o),_.defer(function(){n.validate(l)})}},{key:"toggleEdit",value:function(e){var t="on"===e;l(this.props.isDelivery).toggleClass("qr-edit-mode",t),f&&(fConvManager.rjsQrCancelEdit=t?this.handleCancel:_.noop)}},{key:"validate",value:function(e){var t=this.state.errors,n={canSave:t.canSave,body:t.body,name:t.name},r=c["default"]({name:_.trim(this.state.editItem.get("name")),body:_.trim(this.state.editItem.get("body"))},e);return e?n[e]=r.getErrors(e):(n.body=r.getErrors("body"),n.name=r.getErrors("name")),n.canSave=!r.hasErrors(),this.setState({errors:n}),n.canSave}},{key:"handleSave",value:function(){this.validate()&&(this.toggleEdit("off"),this.props.editActions.onSave(this.state.editItem))}},{key:"handleCancel",value:function(){this.toggleEdit("off"),this.props.editActions.onCancel(this.state.editItem)}},{key:"buildErrorString",value:function(){var e="";return this.state.errors.name&&(e+=this.state.errors.name.join(", ")+"<br/>"),this.state.errors.body&&(e+=this.state.errors.body.join(", ")),e}},{key:"render",value:function(){var e=this.state,t=e.nameCharCount,n=e.contentCharCount,r=e.errors,o=e.editItem,i=void 0,a="hint-container",u="",s="",c="qr-edit"+(r.canSave?"":" invalid"),l=!_.isEmpty(r.body),f=!_.isEmpty(r.name);return l||f?(i={__html:this.buildErrorString()},a+=" with-error",u=f?"with-error":u,s=l?"with-error":s):i={__html:$.t("shared.quick_responses.username_hint")+" "+$.t("shared.quick_responses.username_hint_example")},React.createElement("div",{className:c},React.createElement("div",{className:"qr-edit-fields"},React.createElement("label",{className:"qr-name"},React.createElement("input",{type:"text",className:u,placeholder:$.t("shared.quick_responses.qr_placeholder_name"),maxLength:"30",name:"qr-name",autoFocus:"true",onChange:this.onValueChange,defaultValue:o.get("name")}),React.createElement("span",{className:"char-count"},t)),React.createElement("label",{className:"qr-body"},React.createElement("textarea",{name:"qr-body",className:s,placeholder:$.t("shared.quick_responses.qr_placeholder_enter"),maxLength:"2500",defaultValue:o.get("body"),onChange:this.onValueChange}),React.createElement("span",{className:"char-count"},n))),React.createElement("p",{className:a,dangerouslySetInnerHTML:i}),React.createElement("a",{href:"#!",className:"btn-standard btn-white-grad",onClick:this.handleCancel},$.t("general.cancel")),React.createElement("a",{href:"#!",className:"btn-standard btn-green-grad btn-qr-save",onClick:this.handleSave},$.t("general.save")))}}]),t}(React.Component);t["default"]=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(16),o=function(e){return e&&e.__esModule?e:{"default":e}}(r),i={isString:!0,largerThan:0},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o["default"]("QuickResponses",function(t){t("name",$.t("validations.conversation.quick_responses.name"),function(){r.enforce(e.name).allOf(i)}),t("body",$.t("validations.conversation.quick_responses.content"),function(){r.enforce(e.body).allOf(i)})},t)};t["default"]=a},function(e,t,n){!function(t,n){e.exports=n()}(Function("return this")(),function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports=function(){function e(e){return!!e&&("object"===n(e)||"function"==typeof e)}var t,r=null;return(t=function(t,n){if(!e(t)||!e(n))throw new TypeError("Cannot create proxy with a non-object as target or handler");var o=function(){};r=function(){o=function(e){throw new TypeError("Cannot perform '".concat(e,"' on a proxy that has been revoked"))}};var i=n;for(var a in n={get:null,set:null,apply:null,construct:null},i){if(!(a in n))throw new TypeError("Proxy polyfill does not support trap '".concat(a,"'"));n[a]=i[a]}"function"==typeof i&&(n.apply=i.apply.bind(i));var u=this,s=!1,c=!1;"function"==typeof t?(u=function(){var e=this&&this.constructor===u,r=Array.prototype.slice.call(arguments);return o(e?"construct":"apply"),e&&n.construct?n.construct.call(this,t,r):!e&&n.apply?n.apply(t,this,r):e?(r.unshift(t),new(t.bind.apply(t,r))):t.apply(this,r)},s=!0):t instanceof Array&&(u=[],c=!0);var l=n.get?function(e){return o("get"),n.get(this,e,u)}:function(e){return o("get"),this[e]},f=n.set?function(e,t){o("set"),n.set(this,e,t,u)}:function(e,t){o("set"),this[e]=t},d=Object.getOwnPropertyNames(t),p={};d.forEach(function(e){if(!((s||c)&&e in u)){var n={enumerable:!!Object.getOwnPropertyDescriptor(t,e).enumerable,get:l.bind(t,e),set:f.bind(t,e)};Object.defineProperty(u,e,n),p[e]=!0}});var m=!0;if(Object.setPrototypeOf?Object.setPrototypeOf(u,Object.getPrototypeOf(t)):u.__proto__?u.__proto__=t.__proto__:m=!1,n.get||!m)for(var h in t)p[h]||Object.defineProperty(u,h,{get:l.bind(t,h)});return Object.seal(t),Object.seal(u),u}).revocable=function(e,n){return{proxy:new t(e,n),revoke:r}},t}},function(e){e.exports={a:"6.3.3"}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){return Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)?Array.from(e):void 0}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n,r){if("function"!=typeof r[t])return"function"==typeof n[t]&&n[t](e);var o=n[t];return r[t](e,o)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return R(t,"boolean","isArray"),M(e,"array")===t}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return R(t,"boolean","isNumber"),M(e,"number")===t}function m(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return R(t,"boolean","isString"),M(e,"string")===t}function h(e,t){return t instanceof RegExp?t.test(e):!!M(t,"string")&&new RegExp(t).test(e)}function y(e,t){if(Array.isArray(t)){if(M(e,"string","number","boolean"))return j(e,t);if(Array.isArray(e))return A(e,t)}return!(!M(t,"string")||!M(e,"string"))&&j(e,t)}function v(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return R(t,"boolean","isNumeric"),(!isNaN(parseFloat(e))&&isFinite(e))===t}function g(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return R(t,"boolean","isEmpty"),0===I(e)===t}function b(e,t){return I(e)===t}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,n){return new N(e,t,n).res}n.r(t);var O={};n.r(O),n.d(O,"compound",function(){return X}),n.d(O,"rule",function(){return J});var C=["warn","fail"],T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.async=null,this.name=t,this.hasValidationErrors=!1,this.hasValidationWarnings=!1,this.failCount=0,this.warnCount=0,this.testCount=0,this.testsPerformed={},this.validationErrors={},this.validationWarnings={},this.skipped=[],this.completionCallbacks=[]}var t,n;return t=e,(n=[{key:"initFieldCounters",value:function(e){return this.testsPerformed[e]?this:(this.testsPerformed[e]={testCount:0,failCount:0,warnCount:0},this)}},{key:"bumpTestCounter",value:function(e){return this.testsPerformed[e]?(this.testsPerformed[e].testCount++,this.testCount++,this):this}},{key:"bumpTestWarning",value:function(e,t){this.hasValidationWarnings=!0,this.validationWarnings[e]=this.validationWarnings[e]||[],this.validationWarnings[e].push(t),this.warnCount++,this.testsPerformed[e].warnCount++}},{key:"bumpTestError",value:function(e,t){this.hasValidationErrors=!0,this.validationErrors[e]=this.validationErrors[e]||[],this.validationErrors[e].push(t),this.failCount++,this.testsPerformed[e].failCount++}},{key:"fail",value:function(e,t,n){return this.testsPerformed[e]?("warn"===(n&&C.includes(n)?n:"fail")?this.bumpTestWarning(e,t):this.bumpTestError(e,t),this):this}},{key:"addToSkipped",value:function(e){return!this.skipped.includes(e)&&this.skipped.push(e),this}},{key:"runCompletionCallbacks",value:function(){var e=this;this.completionCallbacks.forEach(function(t){return t(e)})}},{key:"done",value:function(e){return"function"!=typeof e?this:(this.async||e(this),this.completionCallbacks.push(e),this)}},{key:"markAsync",value:function(e){return this.async=this.async||{},this.async[e]={done:!1},this}},{key:"markAsDone",value:function(e){return this.async&&this.async[e]&&(this.async[e]={done:!0}),this}},{key:"getErrors",value:function(e){return e?this.validationErrors[e]?this.validationErrors[e]:[]:this.validationErrors}},{key:"getWarnings",value:function(e){return e?this.validationWarnings[e]?this.validationWarnings[e]:[]:this.validationWarnings}},{key:"hasErrors",value:function(e){return e?Boolean(this.getErrors(e).length):this.hasValidationErrors}},{key:"hasWarnings",value:function(e){return e?Boolean(this.getWarnings(e).length):this.hasValidationWarnings}}])&&r(t.prototype,n),e}(),k=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){if(!e.is(t))throw new TypeError;if("string"==typeof t||Array.isArray(t)){if(0===t.length)return;this.only=this.populateGroup(this.only,t)}else t.only&&(this.only=this.populateGroup(this.only,t.only)),t.not&&(this.not=this.populateGroup(this.not,t.not))}}var t,n,r;return t=e,r=[{key:"is",value:function(e){return Array.isArray(e)?e.every(function(e){return"string"==typeof e}):"string"==typeof e||!(null===e||"object"!==o(e)||!e.hasOwnProperty("only")&&!e.hasOwnProperty("not"))}}],(n=[{key:"populateGroup",value:function(e,t){return e=e||{},"string"==typeof t?e[t]=!0:Array.isArray(t)&&t.forEach(function(t){return e[t]=!0}),e}},{key:"excludes",value:function(e){return!(!this.only||this.only[e])||!(!this.not||!this.not[e])}}])&&i(t.prototype,n),r&&i(t,r),e}(),q=function(e,t,n){return"[Passable]: failed during suite initialization. Unexpected '".concat(s(t),"' for '").concat(e,"' argument.\n    See: ").concat(n||"https://fiverr.github.io/passable/getting_started/writing_tests.html")},N=function re(e,t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,re),u(this,"pending",[]),u(this,"addPendingTest",function(e){return r.pending.push(e)}),u(this,"clearPendingTest",function(e){r.pending=r.pending.filter(function(t){return t!==e}),0===r.pending.length&&r.res.runCompletionCallbacks()}),u(this,"test",function(e,t,n,o){if(r.specific.excludes(e))r.res.addToSkipped(e);else{var i;if(r.res.initFieldCounters(e),"function"==typeof n)i=r.runTest;else{if(!(n instanceof Promise))return;i=r.addPendingTest}i(Object.assign(n,{fieldName:e,statement:t,severity:o}))}}),u(this,"runTest",function(e){if(e instanceof Promise){r.res.markAsync(e.fieldName);var t=function(){r.res.markAsDone(e.fieldName),r.clearPendingTest(e)};!function(e,t,n){try{e.then(t,n)}catch(e){n()}}(e,t,function(){r.res.fail(e.fieldName,e.statement,e.severity),t()})}else(function(e){var t=null;try{var n=e();t=null!=n&&n.hasOwnProperty("valid")?n.valid:"boolean"!=typeof n||n||!1}catch(e){t=!1}return!!t})(e)||r.res.fail(e.fieldName,e.statement,e.severity),r.clearPendingTest(e);r.res.bumpTestCounter(e.fieldName)}),u(this,"runPendingTests",function(){a(r.pending).forEach(r.runTest)}),"string"!=typeof e)throw new TypeError(q("suite name",e));if("function"!=typeof t)throw new TypeError(q("tests",t));if(n&&!k.is(n))throw new TypeError(q("specific",t,"https://fiverr.github.io/passable/test/specific.html"));this.specific=new k(n),this.res=new T(e),t(this.test,this.res),this.runPendingTests()},P={allOf:function(e,t,n){var r=Object.keys(t);return 0!==r.length&&r.every(function(r){return!0===c(e,r,t,n)})},anyOf:function(e,t,n){return Object.keys(t).some(function(r){return!0===c(e,r,t,n)})},noneOf:function(e,t,n){var r=Object.keys(t);return 0!==r.length&&r.every(function(r){return!0!==c(e,r,t,n)})}},R=function(e,t,n){if(!M(e,t)){var r=Array.isArray(e)?JSON.stringify(e):e;throw new TypeError("[Passable]: Failed to execute '".concat(n,"': expected ").concat(r," to be a ").concat(t,"."))}return!0},A=function(e,t){var n=D(t);return x(e,n)},x=function(e,t){return!!t&&e.every(function(e){return t&&t.has(e)})},j=function(e,t){return t.indexOf(e)>-1},I=function(e){return e?"number"!=typeof e||isNaN(e)?e.hasOwnProperty("length")?e.length:"object"===l(e)?Object.keys(e).length:0:e:0;},M=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return n.some(function(t){return"array"===t?Array.isArray(e):f(e)===t})},D=function(e){return e.reduce(function(e,t){return e.set(t,!0),e},new Map)};d.negativeForm="isNotArray";var L=d;p.negativeForm="isNotNumber";var U=p;m.negativeForm="isNotString";var Q=m;h.negativeForm="notMatches";var F=h;y.negativeForm="notInside";var W=y;v.negativeForm="isNotNumeric";var $=v;g.negativeForm="isNotEmpty";var V=g;b.negativeForm="sizeNotEquals";var B=function(e){for(var t in e)!function(t){var n=e[t].negativeForm;n&&(e[n]=function(){return!e[t].apply(e,arguments)})}(t);return e}({isArray:L,isNumber:U,isString:Q,matches:F,inside:W,isNumeric:$,isEmpty:V,largerThan:function(e,t){return I(e)>t},smallerThan:function(e,t){return I(e)<t},smallerThanOrEquals:function(e,t){return I(e)<=t},largerThanOrEquals:function(e,t){return I(e)>=t},sizeEquals:b}),X=function(e,t,n,r){if("function"==typeof t&&!0!==t(n,r,e))throw new Error("[Enforce]: ".concat(t.name,"  invalid ").concat(_(n)," value"))},J=function(e,t){if("function"==typeof e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];if(!0!==e.apply(void 0,[t].concat(r)))throw new Error("[Enforce]: ".concat(e.name,"  invalid ").concat(E(t)," value"))}},Y=n(0),K=n.n(Y),z=Function("return this")(),H=function(e,t){return z.Proxy?new Proxy(e,t):new(K()())(e,t)},G=function oe(){var e,t,n,r=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,oe),n=function(e){var t=H(r.allRunnables,{get:function(n,o){return r.rules.hasOwnProperty(o)&&"function"==typeof r.rules[o]?function(){for(var n=arguments.length,i=new Array(n),a=0;n>a;a++)i[a]=arguments[a];return J.apply(O,[r.rules[o],e].concat(i)),t}:P.hasOwnProperty(o)&&"function"==typeof P[o]?function(n){return X(r.rules,P[o],e,n),t}:n[o]}});return t},(t="enforce")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.rules=Object.assign({},B,o),this.allRunnables=Object.assign({},P,this.rules),this.enforce},Z=new G({}),ee=G,te=function(e){if("function"!=typeof e&&!(e instanceof Promise))throw new TypeError("[Validate]: expected ".concat(w(e)," to be a function."));try{return!1!==e()}catch(e){return!1}},ne=n(1);S.VERSION=ne.a,S.enforce=Z,S.Enforce=ee,S.validate=te,S.WARN="warn",S.FAIL="fail",t["default"]=S}])["default"]})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(18),c=r(s),l=n(19),f=r(l),d=function(e){function t(){o(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.dragged=!1,e.state={take:null,put:null,dragInProgress:!1},e}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.initDragula()}},{key:"componentWillUpdate",value:function(e,t){_.isNumber(t.take)&&_.isNumber(t.put)&&this.dragged&&(this.dragged=!1,this.props.qrActions.postQROrder(e.responsesList,t.put))}},{key:"initDragula",value:function(){var e=this,t=[this.dragulaDecorator],n=f["default"](t,{moves:function(e,t,n){return!(e&&_.includes(e.classList,"list-link")||n&&_.includes(n.classList,"qr-menu-trigger"))},accepts:function(e,t,n,r){return r&&r.previousSibling?!_.includes(r.previousSibling.classList,"list-link"):!_.includes(e.classList,"list-link")}}),r=function(){var t=document.body.getAttribute("class").replace(/qr-no-drop/g,"");document.body.setAttribute("class",_.trim(t)),e.setState({dragInProgress:!1})},o=function(e){return Array.prototype.slice.call(e.parentNode.children).indexOf(e)};n.on("drag",function(t){e.setState({take:o(t),dragInProgress:!0})}),n.on("drop",function(t){e.setState({put:o(t)}),n.cancel(!0),e.dragged=!0,e.props.qrActions.onDrop(e.state),r()}),n.on("dragend",function(e){r()}),n.on("out",function(e,t,n){var r=document.body.getAttribute("class");r+=" qr-no-drop",document.body.setAttribute("class",r)}),n.on("over",function(e,t,n){r()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.qrActions,r=t.responsesList,o=t.qrKeys,i=t.isDelivery,a=t.menuQR,u=this.state.dragInProgress;return React.createElement("ul",{className:"qr-list",ref:function(t){return e.dragulaDecorator=t}},r.map(function(e,t){var r={index:t,name:e.get("name"),meaning:e.get("meaning"),qr_id:e.get("qr_id"),body:e.get("body"),suggested:e.get("suggested")},s=o.lastUpdated===r.qr_id,l=a&&a.qrId===r.qr_id;return React.createElement(c["default"],{key:t,qr:r,qrActions:n,shouldFlash:s,isDelivery:i,dragInProgress:u,menuVisible:l,hint:o.hint})}),React.createElement("li",{className:"add-new list-link"},React.createElement("a",{href:"#!",onClick:n.onAddNew}," ",$.t("general.add_new"))))}}]),t}(React.Component);t["default"]=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){return e?fConvManager.selectors.$deliveryTextArea:fConvManager.selectors.$messageBody},s=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.box=u(e.isDelivery),n.menuTrigger=n.menuTrigger.bind(n),n.qrClick=n.qrClick.bind(n),n}return i(t,e),a(t,[{key:"menuTrigger",value:function(){if(!this.props.dragInProgress){var e=this.props.qr.qr_id,t=this.qrElement,n={top:t.offsetTop,left:t.offsetLeft+t.offsetWidth};this.props.qrActions.qrMenuTriggered(e,n,u(this.props.isDelivery))}}},{key:"qrClick",value:function(){var e=this.props.qr,t=this.box.val();this.props.qrActions.qrUsed(e.qr_id),e.meaning&&e.meaning.indexOf("yes")>-1&&Fiverr._isPage("conversations")&&ft.utl.safe(fConversations.userClickedPositiveQR),t&&(e.body="\n"+e.body),this.box.insertAtEnd(e.body).highlight({text:this.props.hint})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.qrActions,t.qr),r=t.shouldFlash,o=t.menuVisible,i=n.meaning?"has-meaning "+n.meaning:"",a=r?"flash":"",u=o?"menu-visible":"",s="qr-shared-base inner-wrapper "+i+" "+a+" "+u,c=_.truncate(n.name,{length:30});return React.createElement("li",{className:"qr-item",ref:function(t){return e.qrElement=t}},React.createElement("div",{className:s},React.createElement("a",{href:"#!",onClick:this.qrClick,className:"qr-main"}),React.createElement("a",{href:"#!",onClick:this.menuTrigger,className:"qr-menu-trigger ficon ficon-chevron-down"}),React.createElement("span",null,c),React.createElement("div",{className:"handle"})))}}]),t}(React.Component);t["default"]=s},function(e,t,n){"use strict";function r(){function e(e){t(e),i(e.getElementsByTagName("*")).forEach(t)}function t(e){e.removeAttribute("data-reactid")}return o.apply(this,i(arguments)).on("cloned",e)}var o=n(20),i=n(2);e.exports=r},function(e,t,n){"use strict";(function(t){function r(e,t){function n(e){return-1!==ce.containers.indexOf(e)||se.isContainer(e)}function r(e){var t=e?"remove":"add";o(S,t,"mousedown",C),o(S,t,"mouseup",j)}function u(e){o(S,e?"remove":"add","mousemove",T)}function h(e){var t=e?"remove":"add";_[t](S,"selectstart",O),_[t](S,"click",O)}function v(){r(!0),j({})}function O(e){ae&&e.preventDefault()}function C(e){if(ee=e.clientX,te=e.clientY,!(1!==i(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=k(t);n&&(ae=n,u(),"mousedown"===e.type&&(m(t)?t.focus():e.preventDefault()))}}function T(e){if(ae){if(0===i(e))return void j({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(se.ignoreInputTextSelection){var t=g("clientX",e),n=g("clientY",e);if(m(w.elementFromPoint(t,n)))return}var r=ae;u(!0),h(),A(),P(r);var o=a(H);G=g("pageX",e)-o.left,Z=g("pageY",e)-o.top,E.add(oe||H,"gu-transit"),V(),F(e)}}}function k(e){if(!(ce.dragging&&K||n(e))){for(var t=e;p(e)&&!1===n(p(e));){if(se.invalid(e,t))return;if(!(e=p(e)))return}var r=p(e);if(r&&!se.invalid(e,t)&&se.moves(e,r,t,y(e)))return{item:e,source:r}}}function q(e){return!!k(e)}function N(e){var t=k(e);t&&P(t)}function P(e){Y(e.item,e.source)&&(oe=e.item.cloneNode(!0),ce.emit("cloned",oe,e.item,"copy")),z=e.source,H=e.item,ne=re=y(e.item),ce.dragging=!0,ce.emit("drag",H,z)}function R(){return!1}function A(){if(ce.dragging){var e=oe||H;I(e,p(e))}}function x(){ae=!1,u(!0),h(!0)}function j(e){if(x(),ce.dragging){var t=oe||H,n=g("clientX",e),r=g("clientY",e),o=s(K,n,r),i=Q(o,n,r);i&&(oe&&se.copySortSource||!oe||i!==z)?I(t,i):se.removeOnSpill?M():D()}}function I(e,t){var n=p(e);oe&&se.copySortSource&&t===z&&n.removeChild(H),U(t)?ce.emit("cancel",e,z,z):ce.emit("drop",e,t,z,re),L()}function M(){if(ce.dragging){var e=oe||H,t=p(e);t&&t.removeChild(e),ce.emit(oe?"cancel":"remove",e,t,z),L()}}function D(e){if(ce.dragging){var t=arguments.length>0?e:se.revertOnSpill,n=oe||H,r=p(n),o=U(r);!1===o&&t&&(oe?r&&r.removeChild(oe):z.insertBefore(n,ne)),o||t?ce.emit("cancel",n,z,z):ce.emit("drop",n,r,z,re),L()}}function L(){var e=oe||H;x(),B(),e&&E.rm(e,"gu-transit"),ie&&clearTimeout(ie),ce.dragging=!1,ue&&ce.emit("out",e,ue,z),ce.emit("dragend",e),z=H=oe=ne=re=ie=ue=null}function U(e,t){var n;return n=void 0!==t?t:K?re:y(oe||H),e===z&&n===ne}function Q(e,t,r){for(var o=e;o&&!function(){if(!1===n(o))return!1;var i=X(o,e),a=J(o,i,t,r);return!!U(o,a)||se.accepts(H,o,z,a)}();)o=p(o);return o}function F(e){function t(e){ce.emit(e,a,ue,z)}if(K){e.preventDefault();var n=g("clientX",e),r=g("clientY",e),o=n-G,i=r-Z;K.style.left=o+"px",K.style.top=i+"px";var a=oe||H,u=s(K,n,r),c=Q(u,n,r),l=null!==c&&c!==ue;(l||null===c)&&(function(){ue&&t("out")}(),ue=c,function(){l&&t("over")}());var f=p(a);if(c===z&&oe&&!se.copySortSource)return void(f&&f.removeChild(a));var d,m=X(c,u);if(null!==m)d=J(c,m,n,r);else{if(!0!==se.revertOnSpill||oe)return void(oe&&f&&f.removeChild(a));d=ne,c=z}(null===d&&l||d!==a&&d!==y(a))&&(re=d,c.insertBefore(a,d),ce.emit("shadow",a,c,z))}}function W(e){E.rm(e,"gu-hide")}function $(e){ce.dragging&&E.add(e,"gu-hide")}function V(){if(!K){var e=H.getBoundingClientRect();K=H.cloneNode(!0),K.style.width=f(e)+"px",K.style.height=d(e)+"px",E.rm(K,"gu-transit"),E.add(K,"gu-mirror"),se.mirrorContainer.appendChild(K),o(S,"add","mousemove",F),E.add(se.mirrorContainer,"gu-unselectable"),ce.emit("cloned",K,H,"mirror")}}function B(){K&&(E.rm(se.mirrorContainer,"gu-unselectable"),o(S,"remove","mousemove",F),p(K).removeChild(K),K=null)}function X(e,t){for(var n=t;n!==e&&p(n)!==e;)n=p(n);return n===S?null:n}function J(e,t,n,r){function o(e){return e?y(t):t}var i="horizontal"===se.direction;return t!==e?function(){var e=t.getBoundingClientRect();return o(i?n>e.left+f(e)/2:r>e.top+d(e)/2)}():function(){var t,o,a,u=e.children.length;for(t=0;u>t;t++){if(o=e.children[t],a=o.getBoundingClientRect(),i&&a.left+a.width/2>n)return o;if(!i&&a.top+a.height/2>r)return o}return null}()}function Y(e,t){return"boolean"==typeof se.copy?se.copy:se.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var K,z,H,G,Z,ee,te,ne,re,oe,ie,ae,ue=null,se=t||{};void 0===se.moves&&(se.moves=l),void 0===se.accepts&&(se.accepts=l),void 0===se.invalid&&(se.invalid=R),void 0===se.containers&&(se.containers=e||[]),void 0===se.isContainer&&(se.isContainer=c),void 0===se.copy&&(se.copy=!1),void 0===se.copySortSource&&(se.copySortSource=!1),void 0===se.revertOnSpill&&(se.revertOnSpill=!1),void 0===se.removeOnSpill&&(se.removeOnSpill=!1),void 0===se.direction&&(se.direction="vertical"),void 0===se.ignoreInputTextSelection&&(se.ignoreInputTextSelection=!0),void 0===se.mirrorContainer&&(se.mirrorContainer=w.body);var ce=b({containers:se.containers,start:N,end:A,cancel:D,remove:M,destroy:v,canMove:q,dragging:!1});return!0===se.removeOnSpill&&ce.on("over",W).on("out",$),r(),ce}function o(e,n,r,o){var i={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},a={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},u={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?_[n](e,a[r],o):t.navigator.msPointerEnabled?_[n](e,u[r],o):(_[n](e,i[r],o),_[n](e,r,o))}function i(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function a(e){var t=e.getBoundingClientRect();return{left:t.left+u("scrollLeft","pageXOffset"),top:t.top+u("scrollTop","pageYOffset")}}function u(e,n){return void 0!==t[n]?t[n]:S.clientHeight?S[e]:w.body[e]}function s(e,t,n){var r,o=e||{},i=o.className;return o.className+=" gu-hide",r=w.elementFromPoint(t,n),o.className=i,r}function c(){return!1}function l(){return!0}function f(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===w?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||h(e)}function h(e){return!!e&&"false"!==e.contentEditable&&("true"===e.contentEditable||h(p(e)))}function y(e){return e.nextElementSibling||function(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}()}function v(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function g(e,t){var n=v(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var b=n(21),_=n(27),E=n(30),w=document,S=w.documentElement;e.exports=r}).call(t,n(0))},function(e,t,n){"use strict";var r=n(2),o=n(22);e.exports=function(e,t){var n=t||{},i={};return void 0===e&&(e={}),e.on=function(t,n){return i[t]?i[t].push(n):i[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete i[t];else if(0===r)i={};else{var o=i[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(i[t]||[]).slice(0);return function(){var i=r(arguments),u=this||e;if("error"===t&&!1!==n["throws"]&&!a.length)throw 1===i.length?i[0]:i;return a.forEach(function(r){n.async?o(r,i,u):r.apply(u,i),r._once&&e.off(t,r)}),e}},e}},function(e,t,n){"use strict";var r=n(23);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(24).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(25),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[s]=r,u(s),s++}function o(e){delete c[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{i(t)}finally{o(e),l=!1}}}}if(!e.setImmediate){var u,s=1,c={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){u=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),u=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},u=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;u=function(t){var n=f.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){u=function(e){setTimeout(a,0,e)}}(),d.setImmediate=r,d.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(26))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){h&&p&&(h=!1,p.length?m=p.concat(m):y=-1,m.length&&u())}function u(){if(!h){var e=o(a);h=!0;for(var t=m.length;t;){for(p=m,m=[];++y<t;)p&&p[y].run();y=-1,t=m.length}p=null,h=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var p,m=[],h=!1,y=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new s(e,t)),1!==m.length||h||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){return e.addEventListener(t,n,r)}function o(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function i(e,t,n,r){return e.removeEventListener(t,n,r)}function a(e,t,n){var r=l(e,t,n);return r?e.detachEvent("on"+t,r):void 0}function u(e,t,n){var r=-1===p.indexOf(t)?function(){return new d(t,{detail:n})}():function(){var e;return m.createEvent?(e=m.createEvent("Event"),e.initEvent(t,!0,!0)):m.createEventObject&&(e=m.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function s(e,n,r){return function(n){var o=n||t.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}function c(e,t,n){var r=l(e,t,n)||s(e,t,n);return v.push({wrapper:r,element:e,type:t,fn:n}),r}function l(e,t,n){var r=f(e,t,n);if(r){var o=v[r].wrapper;return v.splice(r,1),o}}function f(e,t,n){var r,o;for(r=0;r<v.length;r++)if(o=v[r],o.element===e&&o.type===t&&o.fn===n)return r}var d=n(28),p=n(29),m=t.document,h=r,y=i,v=[];t.addEventListener||(h=o,y=a),e.exports={add:h,remove:y,fabricate:u}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(t){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],r="",o=/^on/;for(r in t)o.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function r(e){var t=a[e];return t?t.lastIndex=0:a[e]=t=new RegExp(u+e+s,"g"),t}function o(e,t){var n=e.className;n.length?r(t).test(n)||(e.className+=" "+t):e.className=t}function i(e,t){e.className=e.className.replace(r(t)," ").trim()}var a={},u="(?:^|\\s)",s="(?:\\s|$)";e.exports={add:o,rm:i}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.confirmDelete=n.confirmDelete.bind(n),n}return i(t,e),a(t,[{key:"calcMenuPosition",value:function(){var e=this.props.qr.coordinates,t=this.props.listWrapperElement,n=this.menuElement.offsetWidth;document.body.offsetWidth,this.menuElement.style.left=e.left-n+"px",this.menuElement.style.top=e.top-t.scrollTop+"px"}},{key:"componentDidMount",value:function(){this.calcMenuPosition(),this.props.listWrapperElement.addEventListener("scroll",this.props.hideQRMenu)}},{key:"componentWillUnmount",value:function(){this.props.listWrapperElement.removeEventListener("scroll",this.props.hideQRMenu)}},{key:"componentDidUpdate",value:function(){this.calcMenuPosition()}},{key:"confirmDelete",value:function(){var e=this;Fiverr.popups.confirmation({onConfirm:function(){e.props.menuActions.onDelete(e.props.qr.qrId)},confirmHeader:$.t("shared.quick_responses.qr_delete"),confirmText:$.t("shared.quick_responses.qr_delete_msg"),buttons:[{btnText:$.t("general.cancel")},{btnText:$.t("general.delete")}]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.qr,r=t.menuActions,o=n.qrId;return React.createElement("nav",{className:"qr-shared-base shown",ref:function(t){return e.menuElement=t}},React.createElement("a",{href:"#!",className:"edit",onClick:function(){r.onEdit(o)}},$.t("general.edit")),React.createElement("a",{href:"#!",className:"duplicate",onClick:function(){r.onDuplicate(o)}},$.t("general.duplicate")),React.createElement("a",{href:"#!",className:"delete",onClick:this.confirmDelete},$.t("general.delete")))}}]),t}(React.Component);t["default"]=u},function(e,t){}]);