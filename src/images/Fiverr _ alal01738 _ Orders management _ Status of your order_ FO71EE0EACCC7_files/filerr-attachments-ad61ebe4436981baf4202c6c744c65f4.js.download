var filerrAttachments=function(e){function t(){switch(a=e,s.attachmentName=a,a){case"delivery_attachments":i=["#filerr-delivery-pending-attachments-ids"],c=".btn-deliver";break;case"source_delivery_attachments":i=["#filerr-source-delivery-pending-attachments-ids"],c=".btn-deliver";break;case"order_attachments":i=["#filerr-order-pending-attachments-ids"],c=".btn-send-message";break;case"attachments":i=["#filerr-pending-attachment-ids","#message-attachment-id","#pending-attachment-ids"],c=".btn-send-message"}d||$(c).on("click",function(){n.validateFilerrAttachmentsAndRemoveInvalid()})}var n=this,a="",i=[],r={},c="",d=!0,s={objectName:"message",getPolicyUrl:"/messages/policy",createPendingAttachmentIdUrl:"/messages/create_pending_attachment"};n.isFilerrOnly=function(){return d},n.getFilerrConfig=function(){return s},n.getUploaderManager=function(e){return r[e]&&r[e].uploaderManager},n.addPendingAttachmentId=function(e){$.each(i,function(t,n){var a=$(n);if(a){var i=a.val();if(i){var r=i.split(",");r.push(e),a.val(r.join(","))}else a.val(e)}})},n.removePendingAttachmentId=function(e){$.each(i,function(t,n){var a=$(n),i=a.val();if(i){var c=i.split(","),d=e;!c.includes(d)&&r&&r[e]&&(d=r[e].newAttachmentId);var s=c.filter(function(e){return e!==d});a.val(s.join(","))}})},n.updateAttachmentsMap=function(e,t){r[e]=r[e]||{},$.extend(r[e],t)},n.validateFilerrAttachmentsAndRemoveInvalid=function(){for(var e in r)r[e].oldAttachmentId||n.removePendingAttachmentId(e)},t()};