!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TOGGLE_SAVING_IN_PROGRESS="TOGGLE_SAVING_IN_PROGRESS",t.SET_DIALOG_MODE="SET_DIALOG_MODE",t.DELETE_NOTE="DELETE_NOTE",t.SAVE_NOTE="SAVE_NOTE"},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";var r=n(3),o=function(e){return e&&e.__esModule?e:{"default":e}}(r),a=document.getElementById("order-notes-show");a&&ReactDOM.render(React.createElement(o["default"],null),a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(s),l=n(6),f=r(l);n(8);var d=n(9),p=r(d),_=i.configureStore(f["default"]),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),c(t,[{key:"render",value:function(){return React.createElement(ReactRedux.Provider,{store:_},React.createElement(p["default"],null))}}]),t}(React.Component);t["default"]=h},function(e,t,n){"use strict";e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Redux.compose(Redux.applyMiddleware(ReduxThunk["default"]),"object"===("undefined"==typeof window?"undefined":r(window))&&void 0!==window.devToolsExtension?window.devToolsExtension():function(e){return e})(Redux.createStore),a=function(e,t){return o(e,t)};t.configureStore=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=function(e){return e&&e.__esModule?e:{"default":e}}(r);t["default"]=Redux.combineReducers({ordershow:o["default"]})},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case a.TOGGLE_SAVING_IN_PROGRESS:return e.setIn(["note","in_progress"],t.value);case a.SET_DIALOG_MODE:return e.setIn(["note","mode"],t.value);case a.SAVE_NOTE:var n=Immutable.fromJS(t.note);return e.setIn(["note"],n);case a.DELETE_NOTE:return e.set("note",Immutable.fromJS({}));default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=r;var o=n(0),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(o),u=Immutable.fromJS({note:initialData.note})},function(e,t){},function(e,t,n){"use strict";function r(e){return{note:e.ordershow.get("note")}}function o(e){return Redux.bindActionCreators(u,e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(a),c=n(11),s=function(e){return e&&e.__esModule?e:{"default":e}}(c);t["default"]=ReactRedux.connect(r,o)(s["default"])},function(e,t,n){"use strict";function r(e,t){return{type:l.SET_DIALOG_MODE,value:e,orderIndex:t}}function o(e,t){return{type:l.TOGGLE_SAVING_IN_PROGRESS,orderIndex:t,value:e}}function a(e,t){return{type:l.SAVE_NOTE,note:e,orderIndex:t}}function u(e,t,n){return function(u,c){var s=void 0;if(u(o(!0,n)),!_.isUndefined(n)){var i=c(),l=i.DataTable.get("current_filter");s=i.DataTable.getIn(["orders",l,n]).order_id}var f=ft.utl.getRestfulUrl("/users/@user/manage_orders/@order/note",{orderId:s});return fetch(f,{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content"),"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({content:e,source:t})}).then(function(e){return e.json()}).then(function(e){e.status>=400?u(o(!1,n)):(u(o(!1,n)),u(a(e.body,n)),u(r("view",n)))})}}function c(e){return{type:l.DELETE_NOTE,orderIndex:e}}function s(e,t){return function(n,r){var o=void 0;if(n(c(t)),!_.isUndefined(t)){var a=r(),u=a.DataTable.get("current_filter");o=a.DataTable.getIn(["orders",u,t]).order_id}var s=ft.utl.getRestfulUrl("/users/@user/manage_orders/@order/note",{orderId:o});return fetch(s,{method:"DELETE",credentials:"same-origin",headers:{"X-CSRF-Token":$('meta[name="csrf-token"]').attr("content"),"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({source:e})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.setDialogMode=r,t.toggleSavingInProgress=o,t.saveNote=a,t.postSaveNote=u,t.deleteNote=c,t.postDeleteNote=s;var i=n(0),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),o=function(e){return e&&e.__esModule?e:{"default":e}}(r),a=function(e){var t=e.setDialogMode,n=e.note,r=_.assign({},{shouldAutoHide:function(){return"view"===n.get("mode")},source:"show",showNoteView:React.createElement("span",{className:"note-label show",onClick:function(){t("view")}},$.t("manage_orders.notes.show_self_note")),addNoteView:React.createElement("span",{className:"note-label add",onClick:function(){t("edit")}},$.t("manage_orders.notes.add_self_note"))},e);return React.createElement(o["default"],{api:r})};t["default"]=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=function(e){return e&&e.__esModule?e:{"default":e}}(r);n(20);var a=function(e){return React.createElement("div",{className:"order-notes-wrapper note-order-page"},React.createElement(o["default"],{api:e.api}))};t["default"]=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(14),s=n(15),i=function(e){return e&&e.__esModule?e:{"default":e}}(s),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.api.note.get("content");return n.state={editMode:!1,noteText:a||"",expend:!1},n.setMode=n.setMode.bind(n),n.handleChange=n.handleChange.bind(n),n.handleSave=n.handleSave.bind(n),n.handleCancel=n.handleCancel.bind(n),n.handleDelete=n.handleDelete.bind(n),n.expendText=n.expendText.bind(n),n}return a(t,e),u(t,[{key:"setMode",value:function(e){this.setState({editMode:e})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({noteText:t.substring(0,1200)})}},{key:"handleCancel",value:function(){var e=this.props.api,t=e.note;e.index,this.setState({noteText:t.get("content")||""}),this.setMode(!1)}},{key:"handleSave",value:function(e){var t=this,n=this.props.api,r=n.postSaveNote,o=n.note,a=n.index,u=n.source;o.get("in_progress")||r(this.state.noteText,u,a).then(function(){t.setMode(!1)})}},{key:"handleDelete",value:function(){var e=this,t=this.props.api;t.postDeleteNote(t.source).then(function(){e.setState({noteText:"",expend:!1})})}},{key:"expendText",value:function(){this.setState({expend:!0})}},{key:"render",value:function(){var e=this,t=this.props.api,n=(t.orderId,t.shouldAutoHide,t.note),r=(t.source,t.postDeleteNote,this.state),o=r.editMode,a=r.noteText,u=r.expend,s=!!n.size&&!!n.get("content"),i="note-wrapper"+(o?" open":" close")+(s?" content":" no-content"),l=a.length>200&&!u,f="note-content"+(u?" expend":""),d="btn-lrg-standard btn-save"+(n.get("in_progress")?" in-progress disabled":"");return React.createElement("div",{className:i},React.createElement("h3",{className:"font-accent"},$.t("manage_orders.notes.personal_note")),React.createElement("p",null,$.t("manage_orders.notes.visible")),React.createElement("div",{className:f},React.createElement("span",{className:"date"},n.get("updated_at")),React.createElement("button",{className:"trash b-0 rf",onClick:this.handleDelete}),React.createElement("button",{className:"edit b-0 rf",onClick:function(){e.setMode(!0)}}),React.createElement("p",{className:"sandbox",dangerouslySetInnerHTML:c.formatForHTML(n.get("content"))})),l&&React.createElement("button",{className:"see-more",onClick:this.expendText},$.t("checkout.see_more")),React.createElement("div",{className:"note-textarea"},React.createElement("textarea",{className:"m-b-5",onChange:this.handleChange,placeholder:$.t("manage_orders.notes.placeholder"),value:a,maxlength:"1200",ref:function(t){e.textBox=t}}),React.createElement("span",{className:"counter rf"},a.length," / 1200 ",$.t("general.characters")," ")),React.createElement("footer",null,React.createElement("div",null,React.createElement("button",{className:"btn-standard btn-cancel",onClick:this.handleCancel},$.t("general.cancel")),React.createElement("button",{className:d,onClick:this.handleSave},$.t("general.save"))),React.createElement("button",{onClick:function(){e.setMode(!0)}},$.t("manage_orders.notes.add"))))}}]),t}(React.Component);t["default"]=l,l.propTypes={api:i["default"].shape({orderId:i["default"].number,shouldAutoHide:i["default"]["function"],note:i["default"].object,source:i["default"].string,postDeleteNote:i["default"]["function"]})}},function(e,t,n){"use strict";function r(e){return{__html:e?e.replace(/\n/g,"<br/>"):""}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatForHTML=r},function(e,t,n){e.exports=n(16)()},function(e,t,n){"use strict";var r=n(17),o=n(18),a=n(19);e.exports=function(){function e(e,t,n,r,u,c){c!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){"use strict";function r(e,t,n,r,a,u,c,s){if(o(t),!e){var i;if(void 0===t)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,a,u,c,s],f=0;i=new Error(t.replace(/%s/g,function(){return l[f++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}var o=function(e){};e.exports=r},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){}]);